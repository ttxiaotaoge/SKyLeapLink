# 最佳实践 (Best Practices)

根据实际使用经验总结的Skill定义和自动化的最佳实践。

---

## ✅ Skill定义的最佳实践

### 1. 清晰胜过完美

🔴 **反面例子**
```
技能: 处理数据
步骤: 
  1. 获取数据
  2. 处理
  3. 输出结果
```

🟢 **正面例子**
```
技能: 汇总日销售数据
步骤:
  1. 从POS系统导出当日销售记录，格式为CSV
  2. 按门店分类，计算每个门店的销售额、客流量、
     平均交易额
  3. 生成Excel报表，包含数据表 + 4个核心指标图表
```

**为什么**：LLM天然理解具体的、有数字的描述。模糊概念容易误解。

---

### 2. 用例子而不是抽象解释

🔴 **反面例子**
```
规则: 按重要性排序
  优先级高 = 很重要
  优先级低 = 不太重要
```

🟢 **正面例子**
```
规则: 按重要性排序
  优先级高 = 至少满足以下之一：
    - 影响用户数 > 10,000
    - 直接支持公司OKR
    - Revenue影响 > $100,000
    - 客户投诉增长趋势
    
  优先级低 = 
    - 内部优化工作
    - 技术债清理
    - 改进工作流效率
```

**为什么**：具体的界限比模糊的描述更容易被AI理解和执行。

---

### 3. 预见并处理异常

🔴 **反面例子**
```
流程：
1. 导入数据
2. 分析
3. 输出结果

如果数据不可用呢？流程文档中没说...
```

🟢 **正面例子**
```
流程：
1. 导入数据
   异常: 数据源无法连接
   处理: 使用上周同期数据，标注为"数据源不可用"
   
   异常: 数据格式错误
   处理: 自动修复常见格式问题，严重问题则报错
   
2. 分析
   ...
```

**为什么**：预防好过被告知出错。包含异常处理让自动化更稳定。

---

### 4. 量化而不是定性

🔴 **反面例子**
```
输出应该是"好看的"报表
成功标准：看起来专业
质量检查：浏览并确认没有明显问题
```

🟢 **正面例子**
```
输出规格：
- 报表文件：PNG格式，宽度1200px, 高度800px
- 颜色方案：按品牌指南（蓝色#0066CC，灰色#F0F0F0）
- 字体：Helvetica Neue, 大小12-16pt
- 数据：包含5个KPI图表，每个图表有标题和图例

成功标准：
- [ ] 没有错误数据（与数据源对比）
- [ ] 文件大小<5MB
- [ ] 能在主流浏览器打开
- [ ] 缺失值用灰色显示并标注"N/A"
```

**为什么**：可测量的标准让自动化结果一致性更好。

---

## 🔄 与LLM协作的最佳实践

### 1. 渐进式教学而不是一次性成型

**好的流程**：
```
第1轮：提交初稿Skill定义
LLM: 我理解了，让我用这个规则试试...
      [执行示例]
      这样对吗？

你: 对，但我发现了一个边界情况...
     [描述新情况]
     应该这样处理...

第2轮：更新规则，再测
LLM: 好的，我更新了规则。再试一遍...

... 迭代2-3次 ...

最终：规则已足够准确，开始生产使用
```

**原因**：通过迭代让规则变得越来越精确。

---

### 2. 给LLM反馈而不是重新定义

🔴 **反面例子**
```
你: 我不満意。你从新定义这个Skill。
LLM: [重新定义...]
```

🟢 **正面例子**
```
你: 输出有问题。问题是：[具体问题]
    原因可能是：[你的分析]
    建议的改进：[具体改进]

LLM: 明白了，我更新规则...
```

**原因**：具体的反馈比模糊的否定更有效。LLM学得更快。

---

### 3. 验证而不是假设

🔴 **反面例子**
```
你定义了Skill，就直接在生产中用
1周后发现问题...
```

🟢 **正面例子**
```
验证步骤：
1. 让LLM在5个真实例子上试运行
2. 对比输出和预期结果
3. 任何不符的地方都要改进
4. 再试5个例子
5. 确认OK后才在生产中用
```

---

## 📊 自动化的最佳实践

### 1. 从最高频、最易重复的工作开始

```
时间收益 = 单次耗时 × 频率 × 改进成功率

高收益工作特征：
- 每周做4+次
- 每次>15分钟
- 做的方式基本固定
- 用AI一个月内就能稳定运行

例子: 日报、周报、数据汇总
```

---

### 2. 测量和记录效果

**需要测量的指标**：
```
- 时间节省：原来 vs 现在 花的时间
- 准确率：正确输出的比例
- 一致性：多次输出结果的一致性
- 成本：LLM API调用成本 vs 省下的人工成本
```

**记录示例**：
```
| 技能 | 频率 | 原耗时 | 新耗时 | 月节省 | 准确率 |
|----|------|--------|--------|--------|--------|
| 周报 | 周 | 60min | 10min | 3.3小时 | 95% |
| 数据汇总 | 日 | 30min | 5min | 10小时 | 98% |
```

---

### 3. 持续改进循环

```
运行 → 问题 → 分析 → 改进 → 验证 → 运行

例子：
周1: 周报自动生成，准确率90%
周2: 发现几项成果遗漏，优化筛选规则
周3: 准确率提升到95%
周4: 再发现1个边界情况，改进处理
...
```

---

### 4. 保持人类在环

**永远不是完全自动化**：

```
┌─────────────────────────┐
│   完全自动化不可靠       │
│（容易出现系统性错误）      │
└─────────────────────────┘

┌──────────────────────┐
│  推荐模式:           │
│                      │
│ AI生成 → 人审查     │  ✅ 80%自动化
│       ↓             │  ✅ 20%人工把关
│    修改/确认         │  ✅ 稳定可靠
└──────────────────────┘
```

对应不同Skill的策略：
- **简单重复工作**（如数据格式转换）→ 可以 95%+ 自动化
- **中等复杂工作**（如周报）→ AI生成初稿，人审核确认
- **复杂决策工作**（如人事评估）→ AI提供建议，人做最终决策

---

## 🎯 常见陷阱与解决方案

### 陷阱 1: 规则过于复杂

🔴 **问题**：
```
规则有20个IF-THEN语句，LLM容易混乱
```

🟢 **解决**：
```
分解为多个简单规则或决策树
或者接受80%准确率，用人工处理边界情况
```

---

### 陷阱 2: 忽视异常处理

🔴 **问题**：
```
定义的规则在99%情况下有效
但1%的异常导致整个流程失败
```

🟢 **解决**：
```
1. 事先识别可能的异常
2. 为每个异常定义处理方式
3. 如果异常太多，改进流程设计本身
```

---

### 陷阱 3: 过度自动化

🔴 **问题**：
```
"我想自动化一切"导致：
- 投入大量时间定义规则
- 结果收益远小于投入
```

🟢 **解决**：
```
优先级评估：
时间收益 = 单次耗时 × 频率 × 改进率 / 定义成本

只自动化那些时间收益 > 投入的工作
```

---

### 陷阱 4: 忽视迭代和改进

🔴 **问题**：
```
第1版Skill定义缺陷，一直用下去
3个月后发现100个问题
```

🟢 **解决**：
```
建立改进循环：
- 每月评估一次运行效果
- 收集反馈
- 改进规则
- 记录变更

让Skill能适应业务变化
```

---

### 陷阱 5: 孤立的Skill系统

🔴 **问题**：
```
Skill都是独立的
不能组合成更大的工作流
```

🟢 **解决**：
```
设计原则：
1. 每个Skill要有清晰的输入/输出
2. 一个Skill的输出可以是另一个Skill的输入
3. 设计简单的Skill，它们可以灵活组合

例子：
┌─────────────┐      ┌──────────────┐      ┌────────────────┐
│ 收集数据    │ ──→  │ 清理 & 转换  │ ──→  │ 生成报表        │
│ Skill       │      │ Skill        │      │ Skill          │
└─────────────┘      └──────────────┘      └────────────────┘
      ↓                    ↓                      ↓
    原始数据            规范化数据            最终报表
```

---

## 📈 扩展到组织级别

### 从个人到团队

```
等级1：个人Skill库
├─ 一个人的5-10个常用技能

等级2：团队共享库
├─ 团队所有成员都需要的技能
├─ 版本控制和知识转移

等级3：组织级工作流
├─ 跨部门流程自动化
├─ 企业级的决策支持
```

### 示例：从周报到综合管理

```
第1步（个人）：
自动生成个人周报

第2步（团队）：
团队成员周报 → 团队周报汇总
                    ↓
第3步（部门）：
部门周报 → 部门管理仪表板

第4步（公司）：
全公司总结 → 执行层报告
```

---

## 🎓 进阶技巧

### 1. 处理需要创意或主观判断的工作

问题：什么工作不适合完全自动化？

答：需要高度创意、主观判断、或风险高的工作。

解决方案：**混合模式**
```
┌─────────────────────────────────────┐
│ AI做什么：                          │
│ - 收集信息和背景                    │
│ - 生成多个备选方案                  │
│ - 列出Pro & Con                     │
│ - 给出数据支持的建议                │
└─────────────────────────────────────┘
                 ↓
人类做什么：
├─ 理解背景
├─ 评估AI的建议
├─ 应用经验和直觉
├─ 做最终决策
└─ 给AI反馈以改进

示例工作：战略决策、创意构思、危机处理
```

---

### 2. 版本控制和知识管理

好的做法：
```
skills/
├─ examples/
│  ├─ weekly-report.v1.0.md      (原始版本)
│  ├─ weekly-report.v1.1.md      (改进版本)
│  ├─ weekly-report.v1.2.md      (最稳定版本)
│  ├─ weekly-report.latest.md    (当前使用版本)
│  
├─ CHANGELOG.md                  (所有修改记录)
└─ REVIEW.md                     (定期评审记录)
```

---

### 3. 监控和告警

```
关键指标如果偏离范围，自动告警：

┌──────────────────────────────────┐
│ 监控项: 周报准确率                │
│ 正常范围: 95-100%               │
│ 告警: <90%                      │
│ 处理: 自动停止，通知负责人        │
└──────────────────────────────────┘
```

---

## ✅ 质量检查清单

在将Skill投入生产前，检查：

**定义质量**：
- [ ] 任何有技术背景的人读后能理解
- [ ] 没有使用模糊词汇（"大约"、"基本"、"通常"）
- [ ] 所有规则都是可验证的
- [ ] 异常情况都有处理方案

**AI测试**：
- [ ] LLM在5个真实例子上都执行正确
- [ ] 输出格式完全符合要求
- [ ] 异常情况也处理正确
- [ ] 性能和成本都可接受

**业务验证**：
- [ ] 相关团队已审核并同意
- [ ] SLA和预期已对齐
- [ ] 反馈机制已建立
- [ ] 故障处理流程已确定

---

## 🚀 最后的建议

> **最好的Skill定义是被实际使用的Skill。不是最完美的，而是能持续带来价值的。**

关键原则：
1. **快速开始** - 30分钟定义一个Skill
2. **立即验证** - 用真实数据测试
3. **持续改进** - 基于反馈不断优化
4. **分享知识** - 让团队学习你的Skill
5. **衡量价值** - 记录时间节省、质量提升

---

**记住：自动化之旅是一个过程，不是目的地。每一个小的改进都值得！** 🎉
